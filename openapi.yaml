---
openapi: 3.0.3

info:
  title: rucQ API
  version: 0.1.0
  description: rucQ API

servers:
  - url: http://localhost:8080
    description: 開発環境

paths:
  /api/camps:
    get:
      summary: 合宿の一覧を取得
      tags:
        - Camps
      operationId: getCamps
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Camp"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: 合宿を作成
      tags:
        - Camps
      operationId: postCamp
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Camp"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/camps/{campId}:
    get:
      summary: 合宿の詳細を取得
      tags:
        - Camps
      operationId: getCamp
      parameters:
        - $ref: "#/components/parameters/CampId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: 合宿を更新
      tags:
        - Camps
      operationId: putCamp
      parameters:
        - $ref: "#/components/parameters/CampId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Camp"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/events:
    get:
      summary: イベントの一覧を取得
      tags:
        - Events
      operationId: getEvents
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Event"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: イベントを作成
      tags:
        - Events
      operationId: postEvent
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Event"
        "400":
          $ref: "#/components/responses/BadRequest"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/events/{eventId}:
    get:
      summary: イベントの詳細を取得
      tags:
        - Events
      operationId: getEvent
      parameters:
        - $ref: "#/components/parameters/EventId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Event"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: イベントを更新
      tags:
        - Events
      operationId: putEvent
      parameters:
        - $ref: "#/components/parameters/EventId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Event"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      summary: イベントを削除
      tags:
        - Events
      operationId: deleteEvent
      parameters:
        - $ref: "#/components/parameters/EventId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/events/{eventId}/registerations:
    post:
      summary: イベントに参加
      tags:
        - Events
      operationId: registerEvent
      parameters:
        - $ref: "#/components/parameters/EventId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      summary: イベントへの参加をキャンセル
      tags:
        - Events
      operationId: unregisterEvent
      parameters:
        - $ref: "#/components/parameters/EventId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/events/{eventId}/participants:
    get:
      summary: イベントの参加者一覧を取得
      tags:
        - Events
      operationId: getParticipants
      parameters:
        - $ref: "#/components/parameters/EventId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/me:
    get:
      summary: 自分の情報を取得
      tags:
        - Users
      operationId: getMe
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/staffs:
    get:
      summary: 合宿係の一覧を取得
      tags:
        - Users
      operationId: getStaffs
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/users/{traqId}:
    put:
      summary: ユーザーの情報を更新（主に合宿係の権限管理用）
      tags:
        - Users
      operationId: putUser
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/users/{traqId}/messages:
    post:
      summary: ユーザーにDMを送信
      tags:
        - Users
      operationId: postMessage
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Message"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/question-groups:
    get:
      summary: 質問グループの一覧を取得
      tags:
        - Questions
      operationId: getQuestionGroups
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/QuestionGroup"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: 質問グループを作成
      tags:
        - Questions
      operationId: postQuestionGroup
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuestionGroup"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuestionGroup"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/question-groups/{questionGroupId}:
    get:
      summary: 質問グループの詳細を取得
      tags:
        - Questions
      operationId: getQuestionGroup
      parameters:
        - $ref: "#/components/parameters/QuestionGroupId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuestionGroup"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: 質問グループを更新
      tags:
        - Questions
      operationId: putQuestionGroup
      parameters:
        - $ref: "#/components/parameters/QuestionGroupId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuestionGroup"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QuestionGroup"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      summary: 質問グループを削除
      tags:
        - Questions
      operationId: deleteQuestionGroup
      parameters:
        - $ref: "#/components/parameters/QuestionGroupId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/questions:
    get:
      summary: 質問の一覧を取得
      tags:
        - Questions
      operationId: getQuestions
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Question"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: 質問を作成
      tags:
        - Questions
      operationId: postQuestion
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Question"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/questions/{questionId}:
    get:
      summary: 質問の詳細を取得
      tags:
        - Questions
      operationId: getQuestion
      parameters:
        - $ref: "#/components/parameters/QuestionId"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: 質問を更新
      tags:
        - Questions
      operationId: putQuestion
      parameters:
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Question"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Question"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      summary: 質問を削除
      tags:
        - Questions
      operationId: deleteQuestion
      parameters:
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "204":
          $ref: "#/components/responses/NoContent"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/options:
    post:
      summary: 選択肢を作成
      tags:
        - Questions
      operationId: postOption
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Option"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Option"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/options/{optionId}:
    put:
      summary: 選択肢を更新
      tags:
        - Questions
      operationId: putOption
      parameters:
        - $ref: "#/components/parameters/OptionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Option"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Option"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/me/answers/{questionId}:
    get:
      summary: 自分の回答を取得
      tags:
        - Questions
      operationId: getMyAnswer
      parameters:
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Answer"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: 回答を更新
      tags:
        - Questions
      operationId: putAnswer
      parameters:
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Answer"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Answer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/users/{traqId}/answers/{questionId}:
    get:
      summary: ユーザーの回答を取得
      tags:
        - Questions
      operationId: getUserAnswer
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Answer"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: 回答を更新
      tags:
        - Questions
      operationId: putUserAnswer
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/QuestionId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Answer"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Answer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/me/payments:
    get:
      summary: 自分の予算を取得
      tags:
        - Payments
      operationId: getMyPayment
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/users/{traqId}/payments:
    get:
      summary: ユーザーの予算を取得
      tags:
        - Payments
      operationId: getUserPayment
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: ユーザーの予算を設定
      tags:
        - Payments
      operationId: postUserPayment
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Payment"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    put:
      summary: ユーザーの予算を更新
      tags:
        - Payments
      operationId: putUserPayment
      parameters:
        - $ref: "#/components/parameters/TraqId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Payment"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Payment"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/payments:
    get:
      summary: 支払い情報の一覧を取得
      tags:
        - Payments
      operationId: getPayments
      parameters:
        - $ref: "#/components/parameters/CampIdQuery"
        - $ref: "#/components/parameters/X-Forwarded-User"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Payment"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/rooms:
    get:
      summary: 部屋の一覧を取得
      tags:
        - Rooms
      operationId: getRooms
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Room"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      summary: 部屋を作成
      tags:
        - Rooms
      operationId: postRoom
      parameters:
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PostRoomRequest"
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Room"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "409":
          $ref: "#/components/responses/Conflict"
        "500":
          $ref: "#/components/responses/InternalServerError"
  /api/rooms/{roomId}:
    put:
      summary: 部屋を更新
      tags:
        - Rooms
      operationId: putRoom
      parameters:
        - $ref: "#/components/parameters/RoomId"
        - $ref: "#/components/parameters/X-Forwarded-User"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PostRoomRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Room"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

components:
  parameters:
    X-Forwarded-User:
      name: X-Forwarded-User
      in: header
      description: ログインしているユーザーのtraQ ID（NeoShowcaseが自動で付与）
      schema:
        type: string
    TraqId:
      name: traqId
      in: path
      description: traQ ID
      required: true
      schema:
        type: string
    CampId:
      name: campId
      in: path
      description: 合宿ID
      required: true
      schema:
        type: integer
    CampIdQuery:
      name: camp_id
      in: query
      description: 合宿ID
      schema:
        type: integer
    EventId:
      name: eventId
      in: path
      description: イベントID
      required: true
      schema:
        type: integer
    QuestionGroupId:
      name: questionGroupId
      in: path
      description: 質問グループのID
      required: true
      schema:
        type: integer
    QuestionId:
      name: questionId
      in: path
      description: 質問ID
      required: true
      schema:
        type: integer
    OptionId:
      name: optionId
      in: path
      description: 選択肢ID
      required: true
      schema:
        type: integer
    RoomId:
      name: roomId
      in: path
      description: 部屋ID
      required: true
      schema:
        type: integer
  responses:
    NoContent:
      description: No Content
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    Conflict:
      description: Conflict
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    InternalServerError:
      description: Internal Server Error
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Internal server error
  schemas:
    Camp:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        displayId:
          type: string
        name:
          type: string
        isDraft:
          type: boolean
        description:
          type: string
      required:
        - id
        - displayId
        - name
        - isDraft
        - description
    Event:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
        description:
          type: string
        location:
          type: string
        timeStart:
          type: string
          format: date-time
        timeEnd:
          type: string
          format: date-time
        campId:
          type: integer
        organizerTraqId:
          type: string
          readOnly: true
        isOfficial:
          type: boolean
        displayColor:
          type: string
        participants:
          type: array
          readOnly: true
          items:
            $ref: "#/components/schemas/User"
      required:
        - id
        - name
        - description
        - location
        - timeStart
        - timeEnd
        - campId
        - organizerTraqId
        - isOfficial
        - displayColor
        - participants
    User:
      type: object
      properties:
        traqId:
          type: string
          readOnly: true
        isStaff:
          type: boolean
      required:
        - traqId
        - isStaff
    Message:
      type: object
      properties:
        content:
          type: string
        sendAt:
          type: string
          format: date-time
      required:
        - content
        - sendAt
    QuestionGroup:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
        description:
          type: string
          nullable: true
        due:
          type: string
          format: date-time
        questions:
          type: array
          readOnly: true
          items:
            $ref: "#/components/schemas/Question"
        campId:
          type: integer
      required:
        - id
        - name
        - description
        - due
        - questions
        - campId
    Question:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        questionGroupId:
          type: integer
        title:
          type: string
        description:
          type: string
          nullable: true
        type:
          type: string
          enum:
            - single
            - multiple
            - free_text
            - free_number
        isPublic:
          type: boolean
        isOpen:
          type: boolean
        options:
          type: array
          readOnly: true
          items:
            $ref: "#/components/schemas/Option"
          nullable: true
      required:
        - id
        - questionGroupId
        - title
        - description
        - type
        - isPublic
        - isOpen
    Option:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        questionId:
          type: integer
        content:
          type: string
      required:
        - id
        - questionId
        - content
    Answer:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        questionId:
          type: integer
          readOnly: true
        userTraqId:
          type: string
          readOnly: true
        content:
          oneOf:
            - type: string
            - type: array
              items:
                type: string
          nullable: true
      required:
        - id
        - questionId
        - userTraqId
    Payment:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        userTraqId:
          type: string
          readOnly: true
        campId:
          type: integer
        amount:
          type: integer
          nullable: true
        amountPaid:
          type: integer
      required:
        - id
        - userTraqId
        - campId
        - amountPaid
    Room:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        campId:
          type: integer
        members:
          type: array
          items:
            $ref: "#/components/schemas/User"
      required:
        - id
        - name
        - campId
        - members
    PostRoomRequest:
      type: object
      properties:
        name:
          type: string
        campId:
          type: integer
        members:
          type: array
          items:
            type: string
      required:
        - name
        - campId
        - members

tags:
  - name: Camps
    description: Camp API
  - name: Events
    description: Event API
  - name: Users
    description: User API
  - name: Questions
    description: Question API
  - name: Payments
    description: Payment API
  - name: Rooms
    description: Room API
